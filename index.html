<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de Contratos (UNPilar)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="wrap">
    <header class="top">
      <h1>Generador de Contratos</h1>
    </header>

    <section class="card grid2">
      <div>
        <h2>Carga de PDFs</h2>
        <label class="dropzone" id="dropzone">
          <input id="pdfFiles" type="file" accept="application/pdf" multiple />
          <div class="dropzone-inner">
            <div class="dropzone-icon" aria-hidden="true">^</div>
            <div class="dropzone-title">Solta tus PDFs aqui</div>
            <div class="dropzone-sub">Arrastra y solta o hace click para seleccionar</div>
            <div class="dropzone-note">DNI (frente/dorso), CUIL y CV</div>
          </div>
        </label>
        <div class="actions">
          <button id="btnClear" class="btn secondary" type="button">Limpiar</button>
        </div>
        <div class="progress">
          <div id="ocrProgress" class="progress-bar" style="width:0%"></div>
        </div>
        <div id="ocrStatus" class="status">Esperando archivos PDF...</div>
        <details class="ocr-details">
          <summary>Ver texto OCR</summary>
          <textarea id="ocrText" class="ocr-text" readonly></textarea>
        </details>

        <div class="actions">
          <button id="btnGenerate" class="btn" type="button">Descargar Word</button>
        </div>

        <p class="hint">Subi el DNI argentino (frente/dorso), CUIL y CV. Se procesa automaticamente al cargar.</p>
      </div>

      <div>
        <div class="row space">
          <h2>Vista previa</h2>
          <button id="btnTogglePreview" class="btn secondary" type="button">Ocultar vista previa</button>
        </div>
        <div class="preview" id="preview"></div>
        <p class="hint">La vista previa es aproximada (texto + reemplazos). El Word conserva el formato de la plantilla.</p>
      </div>
    </section>
  </main>

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/pizzip@3.1.7/dist/pizzip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docxtemplater@3.56.0/build/docxtemplater.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.5/dist/tesseract.min.js"></script>

  <script src="app.js"></script>
</body>
</html>
